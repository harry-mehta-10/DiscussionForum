@model DiscussionForum.Models.Discussion

@{
    ViewData["Title"] = Model.Title; // Set the page title to the discussion title
}

<h1>@Model.Title</h1>
<p>@Model.Content</p>
<p>Created on: @Model.CreateDate.ToString("g")</p>

<h2>Comments</h2>

<p>
    @if (User.Identity.IsAuthenticated) // Check if the user is logged in
    {
        <a asp-action="Create" asp-controller="Comments" asp-route-discussionId="@Model.DiscussionId" class="btn btn-primary">Add New Comment</a>
    }
</p>

<div>
    @if (Model.Comments.Any())
    {
        <ul class="list-group">
            @foreach (var comment in Model.Comments)
            {
                <li class="list-group-item">
                    <strong>@comment.Author</strong> - @comment.CreateDate.ToString("g")
                    <p>@comment.Content</p>
                </li>
            }
        </ul>
    }
    else
    {
        <p>No comments yet.</p>
    }
</div>

<div>
    <a asp-action="Index">Back to Discussions</a>
</div>